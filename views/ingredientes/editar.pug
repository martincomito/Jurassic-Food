extends ../layout

block content
  h2 Editar Ingrediente
  
  form(method="POST", action=`/ingredientes/${ingrediente._id}?_method=PUT`)
    input(type="hidden", name="_method", value="PUT")
    .fila-formulario
      .grupo-formulario
        label(for="nombre") Nombre:
        input(type="text", id="nombre", name="nombre", value=ingrediente.nombre, required)
      
      .grupo-formulario
        label(for="cantidad") Cantidad:
        input(type="number", id="cantidad", name="cantidad", value=ingrediente.cantidad, min="0", step="0.01", required)
    
    .fila-formulario
      .grupo-formulario
        label(for="unidad") Unidad:
        select(id="unidad", name="unidad", required)
          option(value="", selected=!ingrediente.unidad) Seleccionar unidad
          option(value="kilo", selected=ingrediente.unidad === "kilo") Kilo
          option(value="unidad", selected=ingrediente.unidad === "unidad") Unidad
          option(value="paquete", selected=ingrediente.unidad === "paquete") Paquete
      
      .grupo-formulario
        label(for="precio") Precio:
        input(type="number", id="precio", name="precio", value=ingrediente.precio, min="0", step="0.01", required)
    
    .acciones-formulario
      button.boton.boton-exito(type="submit", id="boton-actualizar") Actualizar Ingrediente
      a.boton.boton-principal(href="/ingredientes") Cancelar

  script.
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.querySelector('form');
      const submitBtn = document.getElementById('boton-actualizar');
      
      form.addEventListener('submit', function() {
        // Esto deshabilita el botón mientras se hace la operación de 
        // actualizar con la base de datos así evitamos nuevos clicks
        // si la operación tarda un poco

        submitBtn.disabled = true;
        submitBtn.textContent = 'Actualizando...';
        submitBtn.style.opacity = '0.6';
        submitBtn.style.cursor = 'not-allowed';
      });
    });

  style.
    .acciones-formulario {
      margin-top: 20px;
      text-align: center;
    }
    
    .boton:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
